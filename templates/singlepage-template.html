<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title><!-- Game Title --></title>
  <style>
    :root {
      color-scheme: light dark;
      font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      --bg: #0f172a;
      --fg: #f8fafc;
      --accent: #38bdf8;
      --panel: rgba(15, 23, 42, 0.85);
    }

    *, *::before, *::after {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 35%, #0ea5e9 100%);
      color: var(--fg);
      display: grid;
      grid-template-columns: 320px 1fr;
      grid-template-rows: auto 1fr auto;
      gap: 12px;
      padding: 16px;
    }

    header {
      grid-column: 1 / -1;
      background: var(--panel);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(148, 163, 184, 0.3);
      border-radius: 12px;
      padding: 12px 16px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 24px;
    }

    header h1 {
      margin: 0;
      font-size: 1.35rem;
      letter-spacing: 0.04em;
    }

    header p {
      margin: 0;
      opacity: 0.75;
      font-size: 0.9rem;
    }

    aside {
      background: var(--panel);
      border: 1px solid rgba(148, 163, 184, 0.3);
      border-radius: 12px;
      padding: 16px;
      display: grid;
      gap: 16px;
      align-content: start;
    }

    aside section {
      display: grid;
      gap: 8px;
    }

    aside h2 {
      margin: 0;
      font-size: 0.95rem;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      opacity: 0.85;
    }

    aside label {
      font-size: 0.85rem;
      display: grid;
      gap: 4px;
    }

    input[type="range"],
    input[type="number"],
    select,
    button {
      appearance: none;
      background: rgba(15, 23, 42, 0.65);
      border: 1px solid rgba(148, 163, 184, 0.4);
      border-radius: 8px;
      padding: 8px 10px;
      color: inherit;
      font: inherit;
      transition: transform 150ms ease, border-color 150ms ease, box-shadow 150ms ease;
    }

    input[type="range"] {
      padding: 0;
      accent-color: var(--accent);
    }

    button:hover, button:focus-visible {
      border-color: var(--accent);
      box-shadow: 0 0 0 2px rgba(56, 189, 248, 0.35);
      transform: translateY(-1px);
      cursor: pointer;
    }

    main {
      background: var(--panel);
      border: 1px solid rgba(148, 163, 184, 0.3);
      border-radius: 12px;
      position: relative;
      overflow: hidden;
      display: grid;
      place-items: center;
    }

    canvas, svg, .game-surface {
      width: min(100%, 960px);
      height: min(100%, 720px);
      max-width: 960px;
      max-height: 720px;
      background: #020617;
      border-radius: 12px;
      box-shadow: 0 20px 64px rgba(2, 6, 23, 0.55);
    }

    footer {
      grid-column: 1 / -1;
      background: rgba(15, 23, 42, 0.65);
      border: 1px solid rgba(148, 163, 184, 0.3);
      border-radius: 12px;
      padding: 12px 16px;
      font-size: 0.85rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 16px;
    }

    footer span {
      opacity: 0.7;
    }

    details summary {
      cursor: pointer;
      font-weight: 600;
    }

    @media (max-width: 1024px) {
      body {
        grid-template-columns: 1fr;
        grid-template-rows: auto auto 1fr auto;
      }
      aside {
        order: 2;
      }
      main {
        order: 3;
      }
    }
  </style>
</head>
<body>
  <header>
    <div>
      <h1><!-- Game Title --></h1>
      <p><!-- Tagline / Instructions --></p>
    </div>
    <button id="action-run">Run / Reset</button>
  </header>

  <aside>
    <section id="controls">
      <h2>Controls</h2>
      <!-- Dynamic control elements inserted by script -->
    </section>

    <section>
      <h2>Artifacts</h2>
      <button id="action-export">Download Artifact</button>
      <button id="action-save">Save Parameters</button>
      <button id="action-load">Load Parameters</button>
      <input type="file" id="load-input" accept="application/json" hidden />
    </section>

    <section>
      <h2>Quick Tips</h2>
      <details open>
        <summary>How to use</summary>
        <ol id="tip-list"></ol>
      </details>
    </section>
  </aside>

  <main>
    <!-- Replace with desired rendering surface -->
    <canvas id="surface" width="960" height="720"></canvas>
  </main>

  <footer>
    <span>Built with vanilla HTML/CSS/JS. Keyboard accessible.</span>
    <span id="status">Ready.</span>
  </footer>

  <template id="control-template">
    <label>
      <span></span>
      <input type="range" />
    </label>
  </template>

  <script>
    const surface = document.querySelector('#surface');
    const ctx = surface.getContext('2d');
    const status = document.querySelector('#status');
    const tipList = document.querySelector('#tip-list');
    const loadInput = document.querySelector('#load-input');

    const tips = [
      'Adjust parameters, then press "Run" to regenerate.',
      'Use Export to download high-resolution artifacts.',
      'Parameters can be saved and reloaded as JSON presets.'
    ];

    function initTips() {
      tipList.innerHTML = '';
      tips.forEach(text => {
        const li = document.createElement('li');
        li.textContent = text;
        tipList.appendChild(li);
      });
    }

    function downloadBlob({ blob, filename }) {
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      requestAnimationFrame(() => {
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
      });
    }

    function downloadJSON(data, filename = 'parameters.json') {
      const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
      downloadBlob({ blob, filename });
    }

    function downloadPNG(canvas, filename = 'artifact.png') {
      canvas.toBlob(blob => {
        if (!blob) {
          console.warn('Canvas export failed');
          return;
        }
        downloadBlob({ blob, filename });
      }, 'image/png');
    }

    function readJSONFile(file) {
      return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.onerror = () => reject(reader.error);
        reader.onload = () => {
          try {
            resolve(JSON.parse(reader.result));
          } catch (error) {
            reject(error);
          }
        };
        reader.readAsText(file);
      });
    }

    const state = {
      parameters: {},
      seed: crypto.getRandomValues(new Uint32Array(1))[0]
    };

    function reset() {
      status.textContent = 'Generatingâ€¦';
      render();
      status.textContent = 'Complete.';
    }

    function render() {
      ctx.fillStyle = '#020617';
      ctx.fillRect(0, 0, surface.width, surface.height);
      // Custom draw logic goes here
    }

    document.querySelector('#action-run').addEventListener('click', reset);
    document.querySelector('#action-export').addEventListener('click', () => {
      downloadPNG(surface, 'artifact.png');
    });

    document.querySelector('#action-save').addEventListener('click', () => {
      downloadJSON({ parameters: state.parameters, seed: state.seed }, 'parameters.json');
    });

    document.querySelector('#action-load').addEventListener('click', () => loadInput.click());

    loadInput.addEventListener('change', async event => {
      const file = event.target.files?.[0];
      if (!file) return;
      try {
        const data = await readJSONFile(file);
        Object.assign(state, data);
        status.textContent = 'Parameters loaded. Ready to regenerate.';
      } catch (error) {
        status.textContent = `Load failed: ${error.message}`;
      } finally {
        loadInput.value = '';
      }
    });

    initTips();
    reset();
  </script>
</body>
</html>
